<!DOCTYPE html>
<!-- saved from url=(0115)https://curric.springboard.com/software-engineering-career-track/default/exercises/flask-boggle/solution/index.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>Flask Boggle</title>

    <link rel="stylesheet" href="./Flask Boggle solution_files/pygments.css" type="text/css">
    <link rel="stylesheet" href="./Flask Boggle solution_files/handouts-sphinx.css">

    
    <link href="./Flask Boggle solution_files/css" rel="stylesheet" type="text/css">
    
</head>
<body>
<div id="page-wrapper">
    <div id="page-sidebar">
        <header>
            <p class="project">Springboard</p>

            <p class="title">Flask Boggle</p>

            <p class="backlink"><a href="https://curric.springboard.com/software-engineering-career-track/default/exercises/flask-boggle/solution/index.html"> Â« Back to Homepage</a></p>

        </header>
        <div id="toc">
            <ul>
<li><a class="reference internal" href="https://curric.springboard.com/software-engineering-career-track/default/exercises/flask-boggle/solution/index.html#">Flask Boggle</a><ul>
<li><a class="reference internal" href="https://curric.springboard.com/software-engineering-career-track/default/exercises/flask-boggle/solution/index.html#tests">Tests</a></li>
</ul>
</li>
</ul>

        </div>
    </div>
    <div id="page-content">
        
  <div class="section" id="flask-boggle">
<h1>Flask Boggle</h1>
<p><a class="reference external" href="https://curric.springboard.com/software-engineering-career-track/default/exercises/flask-boggle-solution.zip">Download solution code</a>.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">boggle.py</span></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">"""Utilities related to Boggle game."""</span>

<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">choice</span>
<span class="kn">import</span> <span class="nn">string</span>


<span class="k">class</span> <span class="nc">Boggle</span><span class="p">():</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">words</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_dict</span><span class="p">(</span><span class="s2">"words.txt"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">read_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dict_path</span><span class="p">):</span>
        <span class="sd">"""Read and return all words in dictionary."""</span>

        <span class="n">dict_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">dict_path</span><span class="p">)</span>
        <span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="n">w</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">dict_file</span><span class="p">]</span>
        <span class="n">dict_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">words</span>

    <span class="k">def</span> <span class="nf">make_board</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Make and return a random boggle board."""</span>

        <span class="n">board</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
            <span class="n">row</span> <span class="o">=</span> <span class="p">[</span><span class="n">choice</span><span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">ascii_uppercase</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span>
            <span class="n">board</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">board</span>

    <span class="k">def</span> <span class="nf">check_valid_word</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">board</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
        <span class="sd">"""Check if a word is a valid word in the dictionary and/or the boggle board"""</span>

        <span class="n">word_exists</span> <span class="o">=</span> <span class="n">word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">words</span>
        <span class="n">valid_word</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">word</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>

        <span class="k">if</span> <span class="n">word_exists</span> <span class="ow">and</span> <span class="n">valid_word</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="s2">"ok"</span>
        <span class="k">elif</span> <span class="n">word_exists</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">valid_word</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="s2">"not-on-board"</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="s2">"not-word"</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">find_from</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">board</span><span class="p">,</span> <span class="n">word</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">seen</span><span class="p">):</span>
        <span class="sd">"""Can we find a word on board, starting at x, y?"""</span>

        <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">4</span> <span class="ow">or</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="c1"># This is called recursively to find smaller and smaller words</span>
        <span class="c1"># until all tries are exhausted or until success.</span>

        <span class="c1"># Base case: this isn't the letter we're looking for.</span>

        <span class="k">if</span> <span class="n">board</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">!=</span> <span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># Base case: we've used this letter before in this current path</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="ow">in</span> <span class="n">seen</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># Base case: we are down to the last letter --- so we win!</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="c1"># Otherwise, this letter is good, so note that we've seen it,</span>
        <span class="c1"># and try of all of its neighbors for the first letter of the</span>
        <span class="c1"># rest of the word</span>
        <span class="c1"># This next line is a bit tricky: we want to note that we've seen the</span>
        <span class="c1"># letter at this location. However, we only want the child calls of this</span>
        <span class="c1"># to get that, and if we used `seen.add(...)` to add it to our set,</span>
        <span class="c1"># *all* calls would get that, since the set is passed around. That would</span>
        <span class="c1"># mean that once we try a letter in one call, it could never be tried again,</span>
        <span class="c1"># even in a totally different path. Therefore, we want to create a *new*</span>
        <span class="c1"># seen set that is equal to this set plus the new letter. Being a new</span>
        <span class="c1"># object, rather than a mutated shared object, calls that don't descend</span>
        <span class="c1"># from us won't have this `y,x` point in their seen.</span>
        <span class="c1">#</span>
        <span class="c1"># To do this, we use the | (set-union) operator, read this line as</span>
        <span class="c1"># "rebind seen to the union of the current seen and the set of point(y,x))."</span>
        <span class="c1">#</span>
        <span class="c1"># (this could be written with an augmented operator as "seen |= {(y, x)}",</span>
        <span class="c1"># in the same way "x = x + 2" can be written as "x += 2", but that would seem</span>
        <span class="c1"># harder to understand).</span>

        <span class="n">seen</span> <span class="o">=</span> <span class="n">seen</span> <span class="o">|</span> <span class="p">{(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">)}</span>

        <span class="c1"># adding diagonals</span>

        <span class="k">if</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_from</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">y</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">seen</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_from</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">y</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">seen</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_from</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">seen</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_from</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">seen</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">True</span>

        <span class="c1"># diagonals</span>
        <span class="k">if</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_from</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">y</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">seen</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">4</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_from</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">y</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">seen</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_from</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">y</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">seen</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">4</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_from</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">y</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">seen</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="c1"># Couldn't find the next letter, so this path is dead</span>

        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">board</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
        <span class="sd">"""Can word be found in board?"""</span>

        <span class="c1"># Find starting letter --- try every spot on board and,</span>
        <span class="c1"># win fast, should we find the word at that place.</span>

        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_from</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">word</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">seen</span><span class="o">=</span><span class="nb">set</span><span class="p">()):</span>
                    <span class="k">return</span> <span class="kc">True</span>

        <span class="c1"># We've tried every path from every starting square w/o luck.</span>
        <span class="c1"># Sad panda.</span>

        <span class="k">return</span> <span class="kc">False</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">app.py</span></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">render_template</span><span class="p">,</span> <span class="n">jsonify</span><span class="p">,</span> <span class="n">session</span>
<span class="kn">from</span> <span class="nn">boggle</span> <span class="kn">import</span> <span class="n">Boggle</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s2">"SECRET_KEY"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"fdfgkjtjkkg45yfdb"</span>

<span class="n">boggle_game</span> <span class="o">=</span> <span class="n">Boggle</span><span class="p">()</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">"/"</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">homepage</span><span class="p">():</span>
    <span class="sd">"""Show board."""</span>

    <span class="n">board</span> <span class="o">=</span> <span class="n">boggle_game</span><span class="o">.</span><span class="n">make_board</span><span class="p">()</span>
    <span class="n">session</span><span class="p">[</span><span class="s1">'board'</span><span class="p">]</span> <span class="o">=</span> <span class="n">board</span>
    <span class="n">highscore</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"highscore"</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">nplays</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"nplays"</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s2">"index.html"</span><span class="p">,</span> <span class="n">board</span><span class="o">=</span><span class="n">board</span><span class="p">,</span>
                           <span class="n">highscore</span><span class="o">=</span><span class="n">highscore</span><span class="p">,</span>
                           <span class="n">nplays</span><span class="o">=</span><span class="n">nplays</span><span class="p">)</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">"/check-word"</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">check_word</span><span class="p">():</span>
    <span class="sd">"""Check if word is in dictionary."""</span>

    <span class="n">word</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="s2">"word"</span><span class="p">]</span>
    <span class="n">board</span> <span class="o">=</span> <span class="n">session</span><span class="p">[</span><span class="s2">"board"</span><span class="p">]</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">boggle_game</span><span class="o">.</span><span class="n">check_valid_word</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">word</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">'result'</span><span class="p">:</span> <span class="n">response</span><span class="p">})</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">"/post-score"</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">"POST"</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">post_score</span><span class="p">():</span>
    <span class="sd">"""Receive score, update nplays, update high score if appropriate."""</span>

    <span class="n">score</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s2">"score"</span><span class="p">]</span>
    <span class="n">highscore</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"highscore"</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">nplays</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"nplays"</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="n">session</span><span class="p">[</span><span class="s1">'nplays'</span><span class="p">]</span> <span class="o">=</span> <span class="n">nplays</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">session</span><span class="p">[</span><span class="s1">'highscore'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">highscore</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">brokeRecord</span><span class="o">=</span><span class="n">score</span> <span class="o">&gt;</span> <span class="n">highscore</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">templates/index.html</span></div>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;!doctype html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Boggle<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="na">href</span><span class="o">=</span><span class="s">"/static/boggle.css"</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">section</span> <span class="na">id</span><span class="o">=</span><span class="s">"boggle"</span><span class="p">&gt;</span>

      <span class="p">&lt;</span><span class="nt">table</span> <span class="na">class</span><span class="o">=</span><span class="s">"board"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
          {% for row in board %}
          <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
            {% for cell in row %}
            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ cell }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
            {% endfor %}
          <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
          {% endfor %}
        <span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>

      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>High Score: 
        <span class="p">&lt;</span><span class="nt">b</span><span class="p">&gt;</span>{{ highscore }}<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;</span> 
        in {{ nplays }} plays
      <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
        Score: <span class="p">&lt;</span><span class="nt">b</span> <span class="na">class</span><span class="o">=</span><span class="s">"score"</span><span class="p">&gt;</span>0<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;</span>
        Seconds Left: <span class="p">&lt;</span><span class="nt">b</span> <span class="na">class</span><span class="o">=</span><span class="s">"timer"</span><span class="p">&gt;&lt;/</span><span class="nt">b</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

      <span class="p">&lt;</span><span class="nt">form</span> <span class="na">method</span><span class="o">=</span><span class="s">"POST"</span> <span class="na">class</span><span class="o">=</span><span class="s">"add-word"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">name</span><span class="o">=</span><span class="s">"word"</span> <span class="na">class</span><span class="o">=</span><span class="s">"word"</span> <span class="na">autofocus</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span>Enter<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>

      <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">"msg"</span><span class="p">&gt;</span>
        <span class="c">&lt;!-- our JS will put messages here dynamically --&gt;</span>
      <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

      <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">"words"</span><span class="p">&gt;</span>
        <span class="c">&lt;!-- our JS will words here as they score --&gt;</span>   
      <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>

    <span class="p">&lt;/</span><span class="nt">section</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"http://unpkg.com/jquery"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"https://unpkg.com/axios@0.19.0/dist/axios.js"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"/static/boggle.js"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
      <span class="kd">let</span> <span class="nx">game</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BoggleGame</span><span class="p">(</span><span class="s2">"boggle"</span><span class="p">,</span> <span class="mi">60</span><span class="p">);</span>
    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">templates/index.html</span></div>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;!doctype html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Boggle<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="na">href</span><span class="o">=</span><span class="s">"/static/boggle.css"</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">section</span> <span class="na">id</span><span class="o">=</span><span class="s">"boggle"</span><span class="p">&gt;</span>

      <span class="p">&lt;</span><span class="nt">table</span> <span class="na">class</span><span class="o">=</span><span class="s">"board"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
          {% for row in board %}
          <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
            {% for cell in row %}
            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ cell }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
            {% endfor %}
          <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
          {% endfor %}
        <span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>

      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>High Score: 
        <span class="p">&lt;</span><span class="nt">b</span><span class="p">&gt;</span>{{ highscore }}<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;</span> 
        in {{ nplays }} plays
      <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
        Score: <span class="p">&lt;</span><span class="nt">b</span> <span class="na">class</span><span class="o">=</span><span class="s">"score"</span><span class="p">&gt;</span>0<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;</span>
        Seconds Left: <span class="p">&lt;</span><span class="nt">b</span> <span class="na">class</span><span class="o">=</span><span class="s">"timer"</span><span class="p">&gt;&lt;/</span><span class="nt">b</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

      <span class="p">&lt;</span><span class="nt">form</span> <span class="na">method</span><span class="o">=</span><span class="s">"POST"</span> <span class="na">class</span><span class="o">=</span><span class="s">"add-word"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">name</span><span class="o">=</span><span class="s">"word"</span> <span class="na">class</span><span class="o">=</span><span class="s">"word"</span> <span class="na">autofocus</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span>Enter<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>

      <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">"msg"</span><span class="p">&gt;</span>
        <span class="c">&lt;!-- our JS will put messages here dynamically --&gt;</span>
      <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

      <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">"words"</span><span class="p">&gt;</span>
        <span class="c">&lt;!-- our JS will words here as they score --&gt;</span>   
      <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>

    <span class="p">&lt;/</span><span class="nt">section</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"http://unpkg.com/jquery"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"https://unpkg.com/axios@0.19.0/dist/axios.js"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"/static/boggle.js"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
      <span class="kd">let</span> <span class="nx">game</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BoggleGame</span><span class="p">(</span><span class="s2">"boggle"</span><span class="p">,</span> <span class="mi">60</span><span class="p">);</span>
    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">static/boggle.js</span></div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">class</span> <span class="nx">BoggleGame</span> <span class="p">{</span>
  <span class="cm">/* make a new game at this DOM id */</span>

  <span class="nx">constructor</span><span class="p">(</span><span class="nx">boardId</span><span class="p">,</span> <span class="nx">secs</span> <span class="o">=</span> <span class="mi">60</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">secs</span> <span class="o">=</span> <span class="nx">secs</span><span class="p">;</span> <span class="c1">// game length</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">showTimer</span><span class="p">();</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">score</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">words</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Set</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">board</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#"</span> <span class="o">+</span> <span class="nx">boardId</span><span class="p">);</span>

    <span class="c1">// every 1000 msec, "tick"</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">tick</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">),</span> <span class="mi">1000</span><span class="p">);</span>

    <span class="nx">$</span><span class="p">(</span><span class="s2">".add-word"</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">board</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">"submit"</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleSubmit</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
  <span class="p">}</span>

  <span class="cm">/* show word in list of words */</span>

  <span class="nx">showWord</span><span class="p">(</span><span class="nx">word</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s2">".words"</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">board</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;li&gt;"</span><span class="p">,</span> <span class="p">{</span> <span class="nx">text</span><span class="o">:</span> <span class="nx">word</span> <span class="p">}));</span>
  <span class="p">}</span>

  <span class="cm">/* show score in html */</span>

  <span class="nx">showScore</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s2">".score"</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">board</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">score</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="cm">/* show a status message */</span>

  <span class="nx">showMessage</span><span class="p">(</span><span class="nx">msg</span><span class="p">,</span> <span class="nx">cls</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s2">".msg"</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">board</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">removeClass</span><span class="p">()</span>
      <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="sb">`msg </span><span class="si">${</span><span class="nx">cls</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="cm">/* handle submission of word: if unique and valid, score &amp; show */</span>

  <span class="nx">async</span> <span class="nx">handleSubmit</span><span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">evt</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
    <span class="kr">const</span> <span class="nx">$word</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">".word"</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">board</span><span class="p">);</span>

    <span class="kd">let</span> <span class="nx">word</span> <span class="o">=</span> <span class="nx">$word</span><span class="p">.</span><span class="nx">val</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">word</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">words</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">word</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">showMessage</span><span class="p">(</span><span class="sb">`Already found </span><span class="si">${</span><span class="nx">word</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span> <span class="s2">"err"</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// check server for validity</span>
    <span class="kr">const</span> <span class="nx">resp</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"/check-word"</span><span class="p">,</span> <span class="p">{</span> <span class="nx">params</span><span class="o">:</span> <span class="p">{</span> <span class="nx">word</span><span class="o">:</span> <span class="nx">word</span> <span class="p">}});</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">result</span> <span class="o">===</span> <span class="s2">"not-word"</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">showMessage</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">word</span><span class="si">}</span><span class="sb"> is not a valid English word`</span><span class="p">,</span> <span class="s2">"err"</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">result</span> <span class="o">===</span> <span class="s2">"not-on-board"</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">showMessage</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">word</span><span class="si">}</span><span class="sb"> is not a valid word on this board`</span><span class="p">,</span> <span class="s2">"err"</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">showWord</span><span class="p">(</span><span class="nx">word</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">score</span> <span class="o">+=</span> <span class="nx">word</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">showScore</span><span class="p">();</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">words</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">word</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">showMessage</span><span class="p">(</span><span class="sb">`Added: </span><span class="si">${</span><span class="nx">word</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span> <span class="s2">"ok"</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">$word</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s2">""</span><span class="p">).</span><span class="nx">focus</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="cm">/* Update timer in DOM */</span>

  <span class="nx">showTimer</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s2">".timer"</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">board</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">secs</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="cm">/* Tick: handle a second passing in game */</span>

  <span class="nx">async</span> <span class="nx">tick</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">secs</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">showTimer</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">secs</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">clearInterval</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
      <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">scoreGame</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="cm">/* end of game: score and update message. */</span>

  <span class="nx">async</span> <span class="nx">scoreGame</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s2">".add-word"</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">board</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
    <span class="kr">const</span> <span class="nx">resp</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">"/post-score"</span><span class="p">,</span> <span class="p">{</span> <span class="nx">score</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">score</span> <span class="p">});</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">brokeRecord</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">showMessage</span><span class="p">(</span><span class="sb">`New record: </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">score</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span> <span class="s2">"ok"</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">showMessage</span><span class="p">(</span><span class="sb">`Final score: </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">score</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span> <span class="s2">"ok"</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="tests">
<h2>Tests</h2>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">test.py</span></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">unittest</span> <span class="kn">import</span> <span class="n">TestCase</span>
<span class="kn">from</span> <span class="nn">app</span> <span class="kn">import</span> <span class="n">app</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">session</span>
<span class="kn">from</span> <span class="nn">boggle</span> <span class="kn">import</span> <span class="n">Boggle</span>


<span class="k">class</span> <span class="nc">FlaskTests</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Stuff to do before every test."""</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">test_client</span><span class="p">()</span>
        <span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">'TESTING'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">test_homepage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Make sure information is in the session and HTML is displayed"""</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s1">'board'</span><span class="p">,</span> <span class="n">session</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'highscore'</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'nplays'</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="sa">b</span><span class="s1">'&lt;p&gt;High Score:'</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="sa">b</span><span class="s1">'Score:'</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="sa">b</span><span class="s1">'Seconds Left:'</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_valid_word</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Test if word is valid by modifying the board in the session"""</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">client</span><span class="o">.</span><span class="n">session_transaction</span><span class="p">()</span> <span class="k">as</span> <span class="n">sess</span><span class="p">:</span>
                <span class="n">sess</span><span class="p">[</span><span class="s1">'board'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">"C"</span><span class="p">,</span> <span class="s2">"A"</span><span class="p">,</span> <span class="s2">"T"</span><span class="p">,</span> <span class="s2">"T"</span><span class="p">,</span> <span class="s2">"T"</span><span class="p">],</span> 
                                 <span class="p">[</span><span class="s2">"C"</span><span class="p">,</span> <span class="s2">"A"</span><span class="p">,</span> <span class="s2">"T"</span><span class="p">,</span> <span class="s2">"T"</span><span class="p">,</span> <span class="s2">"T"</span><span class="p">],</span> 
                                 <span class="p">[</span><span class="s2">"C"</span><span class="p">,</span> <span class="s2">"A"</span><span class="p">,</span> <span class="s2">"T"</span><span class="p">,</span> <span class="s2">"T"</span><span class="p">,</span> <span class="s2">"T"</span><span class="p">],</span> 
                                 <span class="p">[</span><span class="s2">"C"</span><span class="p">,</span> <span class="s2">"A"</span><span class="p">,</span> <span class="s2">"T"</span><span class="p">,</span> <span class="s2">"T"</span><span class="p">,</span> <span class="s2">"T"</span><span class="p">],</span> 
                                 <span class="p">[</span><span class="s2">"C"</span><span class="p">,</span> <span class="s2">"A"</span><span class="p">,</span> <span class="s2">"T"</span><span class="p">,</span> <span class="s2">"T"</span><span class="p">,</span> <span class="s2">"T"</span><span class="p">]]</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'/check-word?word=cat'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s1">'result'</span><span class="p">],</span> <span class="s1">'ok'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_invalid_word</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Test if word is in the dictionary"""</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'/check-word?word=impossible'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s1">'result'</span><span class="p">],</span> <span class="s1">'not-on-board'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">non_english_word</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Test if word is on the board"""</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="s1">'/check-word?word=fsjdakfkldsfjdslkfjdlksf'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s1">'result'</span><span class="p">],</span> <span class="s1">'not-word'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>



    </div>
</div>
<script type="text/javascript" src="./Flask Boggle solution_files/jquery.js"></script>
<script type="text/javascript" src="./Flask Boggle solution_files/underscore.js"></script>
<script type="text/javascript" src="./Flask Boggle solution_files/doctools.js"></script>
<script type="text/javascript" src="./Flask Boggle solution_files/language_data.js"></script> 

</body></html>